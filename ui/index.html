<!DOCTYPE html>
<html>
<head>
  <title>Repo Summarizer</title>
  <style>
    body { font-family: Arial; max-width: 700px; margin: 40px auto; }
    button { padding: 10px 20px; }
    textarea { width: 100%; height: 220px; }
  </style>
</head>

<body>

<h2>Repository Summarizer</h2>

<p>
Enter a repository URL and get a structured explanation of the project,
its purpose, technologies, and use cases.
</p>

<input id="repo" style="width:100%" placeholder="https://github.com/...">

<br><br>

<select id="lang">
  <option value="en">English</option>
  <option value="he">Hebrew</option>
  <option value="es">Spanish</option>
  <option value="fr">French</option>
</select>

<button onclick="run()">APPLY</button>

<br><br>

<textarea id="output"></textarea>

<script>
async function run() {
  const repo = document.getElementById("repo").value;
  const lang = document.getElementById("lang").value;

  const res = await fetch(
    `/summarize?repo_url=${encodeURIComponent(repo)}&lang=${lang}`
  );

  const data = await res.json();
  document.getElementById("output").value =
      "Category: " + data.classification.category +
      "\n\n" + data.summary;
}
</script>

</body>
</html>
